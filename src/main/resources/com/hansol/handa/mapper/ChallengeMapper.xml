<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hansol.handa.mapper.ChallengeMapper">
	<!-- 전체 챌린지 리스트 조회 (최신 순) -->
	<select id="selectAllChallenge" resultType="ChallengeVO">
		select * from challenge order by createdate asc;
	</select>
	
	<!-- 전체 챌린지 리스트 조회 (오래된 순) -->
	<select id="selectAllChallengeDesc" resultType="ChallengeVO">
		select * from challenge order by createdate desc;
	</select>
	
	<!-- 카테고리 별 챌린지 리스트 조회 (최신 순) -->
	<select id="selectChallengeList" parameterType="int" resultType="ChallengeVO">
		select * from challenge WHERE subcategory_id = #{subcategory_id} order by createdate asc;
	</select>
	
	<!-- 카테고리 별 챌린지 리스트 조회(오래된 순) -->
	<select id="selectChallengeListDesc" parameterType="int" resultType="ChallengeVO">
		select * from challenge WHERE subcategory_id = #{subcategory_id} order by createdate desc;
	</select>
	
	<!-- 카테고리 이름 조회 -->
	<select id="selectCategoryName" parameterType="int" resultType="map">
		select sub_category.sub_category_name, main_category.main_category_name FROM sub_category, main_category 
			WHERE sub_category_id = #{subcategory_id} AND sub_category.main_category_id = main_category.main_category_id;
	</select>
	
	<insert id="createChallenge" parameterType="ChallengeVO">
		insert into challenge(challenge_name,thumbnail,startdate,enddate,description,member_id,subcategory_id,challenge_type)
		values (#{challenge_name},#{thumbnail},#{startdate},#{enddate},#{description},#{member_id},#{subcategory_id},#{challenge_type})
	</insert>
</mapper>